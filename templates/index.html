<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fingerprint Sensor Control</title>
<style>
body { font-family: Arial; padding: 20px; background: #f5f5f5; }
button { margin: 5px; padding: 10px 20px; font-size: 16px; }
#logs { margin-top: 20px; background: #fff; padding: 10px; height: 400px; overflow-y: scroll; border: 1px solid #ccc; white-space: pre-line; }
input[type=number] { width: 60px; padding: 5px; font-size: 16px; }
h2 { margin-bottom: 10px; }
</style>
</head>
<body>
<h2>Fingerprint Sensor Control</h2>

<div>
  <input type="number" id="idInput" placeholder="ID">
  <button onclick="sendCommand('1')">Enroll</button>
  <button onclick="sendCommand('2')">Search</button>
  <button onclick="sendCommand('3')">Delete</button>
</div>

<div id="logs"></div>

<script>
function sendCommand(cmd) {
    const id = document.getElementById("idInput").value;
    fetch("/command", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({cmd: cmd, id: id})
    });
}

// Refresh logs every 300ms
function refreshLogs() {
    fetch("/logs")
    .then(res => res.json())
    .then(data => {
        const logsDiv = document.getElementById("logs");
        logsDiv.innerText = data.logs.join("\n");
        logsDiv.scrollTop = logsDiv.scrollHeight; // auto scroll
    });
}

setInterval(refreshLogs, 300);
</script>
</body>
</html>
