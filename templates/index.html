{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3>Fingerprint Control Panel</h3>
  <input id="fingerId" type="number" placeholder="Enter ID">
  <input id="fingerName" type="text" placeholder="Enter Name (for Enroll)">
  <div class="btn-group">
    <button onclick="sendCmd('1')">Enroll</button>
    <button onclick="sendCmd('2')">Search</button>
    <button onclick="sendCmd('3')">Delete</button>
    <button onclick="clearLogs()">Clear Logs</button>
  </div>
</div>

<div class="card">
  <h3>Live Logs</h3>
  <pre id="logBox"></pre>
</div>

<script>
async function sendCmd(cmd) {
  const id = document.getElementById("fingerId").value;
  const name = document.getElementById("fingerName").value;
  await fetch("/command", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ cmd, id, name })
  });
}

async function updateLogs() {
  const res = await fetch("/logs");
  const data = await res.json();
  document.getElementById("logBox").textContent = data.logs.join("\n");
}

async function clearLogs() {
  await fetch("/clear_logs", { method: "POST" });
  document.getElementById("logBox").textContent = "";
}

setInterval(updateLogs, 1000);
</script>
{% endblock %}

